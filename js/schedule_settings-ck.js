// Locale storage for schedule
function supportsLocalStorage(){return Modernizr.localstorage}function hasClickedScheduleBefore(){return localStorage["schedule_clicked"]==null?!1:JSON.parse(localStorage.schedule_clicked)}function setScheduleLink(){$("#schedule a").prop("href","http://ntnu.1024.no/"+localStorage.schedule_name.toLowerCase())}function hideModal(e){$(e).fadeOut(100);$("#lean_overlay").fadeOut(200)}function displayModal(e){$(e).fadeIn(200);$("#lean_overlay").fadeTo(200,.7);$(".modal_close, #lean_overlay").click(function(){hideModal(e)})}function schedule_input_is_valid(){return $("#schedule_name").val()!==""}function remember_schedule_and_redirect(){localStorage.schedule_clicked="true";localStorage.schedule_name=$("#schedule_name").val();setScheduleLink();setTimeout(function(){document.location.href=$("#schedule a").prop("href")},100)}function forget_schedule_and_redirect(){localStorage.schedule_clicked="true";localStorage.schedule_name="";setScheduleLink();setTimeout(function(){document.location.href=$("#schedule a").prop("href")},100)}if(supportsLocalStorage()){hasClickedScheduleBefore()?setScheduleLink():$("#schedule a").click(function(e){displayModal("#schedule_settings");localStorage.schedule_clicked=!1;e.preventDefault()});$("#schedule .cardface.front").append('<i class="schedule-settings-button cogwheel"></i>');$(".schedule-settings-button").click(function(){displayModal("#schedule_settings")});$("#schedule-yes-button").click(function(){schedule_input_is_valid()?remember_schedule_and_redirect():$("#schedule_name").addClass("error")});$("#schedule-no-button").click(function(){forget_schedule_and_redirect()});$("#schedule_name").val(localStorage.schedule_name);$("#schedule_name").keypress(function(e){if(e.which==13){e.preventDefault();schedule_input_is_valid()?remember_schedule_and_redirect():$("#schedule_name").addClass("error")}})};